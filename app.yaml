runtime: python311
instance_class: F4

env_variables:
  PYTHONPATH: /app
  GCP_REGION: asia-northeast1
  GCP_KEYPATH: "./config/service_account.json"
  GCS_BUCKET_IMAGE: bucket-name-image
  GCS_BUCKET_WORKS: bucket-name-works
  SIGN_URL_EXP: 3600

automatic_scaling:
  target_cpu_utilization: 0.65
  min_instances: 0
  max_instances: 10
  target_throughput_utilization: 0.6

resources:
  cpu: 2
  memory_gb: 4
  disk_size_gb: 10

entrypoint: uvicorn app.main:app --host 0.0.0.0 --port $PORT --limit-max-requests 1000 --timeout-keep-alive 300

# Cloud Runのリクエストサイズ制限を1000MBに設定
max_request_size: 1000m 

# GCS_BUCKET_IMAGE: 実際のCloud Storage画像バケット名
# GCS_BUCKET_WORKS: 実際のCloud Storage作業バケット名    